getwd()
install.packages("xtable")
d <- load("~/designedmissingnessGit/Results/tables20180509_60_1_high.RData")
high <- d
load("~/designedmissingnessGit/Results/tables20180509_60_1_med.RData")
med <- d
load("~/designedmissingnessGit/Results/tables20180509_60_1_low.RData")
low <- d
library(xtable)
print(xtable(cbind("","","",rbind(low[[1]],med[[1]],high[[1]],low[[2]],med[[2]],high[[2]],low[[3]],med[[3]],high[[3]])),digits= 3),include.rownames=FALSE)
load("~/designedmissingnessGit/Results/tables20180509_60_1_high_hightime1.RData")
high <- d
load("~/designedmissingnessGit/Results/tables20180509_60_1_med_hightime1.RData")
med <- d
load("~/designedmissingnessGit/Results/tables20180509_60_1_low_hightime1.RData")
low <- d
library(xtable)
print(xtable(cbind("","","",rbind(low[[1]],med[[1]],high[[1]],low[[2]],med[[2]],high[[2]],low[[3]],med[[3]],high[[3]])),digits= 3),include.rownames=FALSE)
high <- d
getwd()
getwd(../)
cd ../
d <- load("~/../Results/tables20180509_60_1_high.RData")
d <- load("~/GitHub/designedmissingness//Results/tables20180509_60_1_high.RData")
d
load("~/GitHub/designedmissingness//Results/tables20180509_60_1_high.RData")
load("~/GitHub/designedmissingness//Results/tables20180509_60_1_high.RData")
getwd()
getwd()
if (Sys.info()[8] == "Josie"){
setwd("~/GitHub/designedmissingness")
}
getwd()
load("~/Results/tables20180509_60_1_high.RData")
library(ggplot2)
library(dplyr)
library(reshape2)
datmelt <- alternate.split.dat[1:8] %>% is.na %>% melt
colnames(datmelt) <- c("Day","Question","Missing")
#datmelt$block <- ifelse((datmelt$Question=="Q1")|(datmelt$Question=="Q8"),"X",ifelse((datmelt$Question=="Q2")|(datmelt$Question=="Q3"),"A",ifelse((datmelt$Question=="Q4")|(datmelt$Question=="Q5"),"B",ifelse((datmelt$Question=="Q6")|(datmelt$Question=="Q7"),"C",0))))
datmelt$color <- ifelse(datmelt$Missing == "TRUE", "Missing", "Observed")
#ifelse(datmelt$Missing == "TRUE", "Missing", ifelse(datmelt$block == "X","X",ifelse(datmelt$block == "A","A",ifelse(datmelt$block == "B","B",ifelse(datmelt$block == "C","C","Missing")))))
cols <- c("Missing" = "red", "Observed" = "skyblue3")
alternatesplitplot <- ggplot(datmelt, aes(Question, Day, fill=color)) + geom_raster() + scale_fill_manual(values = cols)  + theme(axis.text.x = element_text(angle=45, vjust=0.5),panel.background = element_rect(fill = NA)) + labs(x = "Questions Asked",y = "Day",fill="Block") + scale_y_reverse() + theme(legend.title=element_blank(),legend.position="none")
grid.arrange(splitplot, alternatesplitplot, waveplot, ncol=3)
require(gridExtra)
grid.arrange(splitplot, alternatesplitplot, waveplot, ncol=3)
@
grid.arrange(splitplot, alternatesplitplot, waveplot, ncol=3)
library(ggplot2)
library(dplyr)
library(reshape2)
datmelt <- split.dat[1:8] %>% is.na %>% melt
colnames(datmelt) <- c("Day","Question","Missing")
#datmelt$block <- ifelse((datmelt$Question=="Q1")|(datmelt$Question=="Q8"),"X",ifelse((datmelt$Question=="Q2")|(datmelt$Question=="Q3"),"A",ifelse((datmelt$Question=="Q4")|(datmelt$Question=="Q5"),"B",ifelse((datmelt$Question=="Q6")|(datmelt$Question=="Q7"),"C",0))))
datmelt$color <- ifelse(datmelt$Missing == "TRUE", "Missing", "Observed")
#ifelse(datmelt$Missing == "TRUE", "Missing", ife
cols <- c("Missing" = "red", "Observed" = "skyblue3")
splitplot <- ggplot(datmelt, aes(Question, Day, fill=color)) + geom_raster() + scale_fill_manual(values = cols)  + theme(axis.text.x = element_text(angle=45, vjust=0.5),panel.background = element_rect(fill = NA)) + labs(x = "Questions Asked",y = "Day",fill="Block") + scale_y_reverse() + theme(legend.title=element_blank(),legend.position="none")
datmelt <- split.dat[1:8] %>% is.na %>% melt
cols <- c('Q1','Q2','Q3','Q4','Q5','Q6','Q7','Q8')
fill <- matrix(1, 45, 8)
dat <- data.frame(fill)
colnames(dat) <- cols
dat$Day <- seq.int(nrow(dat))
set.seed(1234)
split.dat <- split.form(dat)[1:8]
library(ggplot2)
library(dplyr)
library(reshape2)
datmelt <- split.dat[1:8] %>% is.na %>% melt
colnames(datmelt) <- c("Day","Question","Missing")
#datmelt$block <- ifelse((datmelt$Question=="Q1")|(datmelt$Question=="Q8"),"X",ifelse((datmelt$Question=="Q2")|(datmelt$Question=="Q3"),"A",ifelse((datmelt$Question=="Q4")|(datmelt$Question=="Q5"),"B",ifelse((datmelt$Question=="Q6")|(datmelt$Question=="Q7"),"C",0))))
datmelt$color <- ifelse(datmelt$Missing == "TRUE", "Missing", "Observed")
#ifelse(datmelt
split.form <- function(set, nrem = 2, bound = 0){
set[set$Day >= bound, paste0("Q",1:8)] <- t(apply(set[set$Day >= bound,paste0("Q",1:8)], 1, function(x){
ind <- sample(1:8, nrem)
x[ind] <- NA
as.numeric(x)
}))
return(set)
}
wave.des <- function(set, nmiss, ...) { # nmiss is the number of days each person would miss? 11?? Like, miss a fourth of the days?
id <- sample(2:45, size=nmiss)
for (i in 1:nmiss) {
set[set$Day %in% id[i], c('Q1','Q2','Q3','Q4','Q5','Q6','Q7','Q8')] <- NA
}
return(set)
}
cols <- c('Q1','Q2','Q3','Q4','Q5','Q6','Q7','Q8')
fill <- matrix(1, 45, 8)
dat <- data.frame(fill)
colnames(dat) <- cols
dat$Day <- seq.int(nrow(dat))
set.seed(1234)
split.dat <- split.form(dat)[1:8]
library(ggplot2)
library(dplyr)
library(reshape2)
datmelt <- split.dat[1:8] %>% is.na %>% melt
colnames(datmelt) <- c("Day","Question","Missing")
#datmelt$block <- ifelse((datmelt$Question=="Q1")|(datmelt$Question=="Q8"),"X",ifelse((datmelt$Question=="Q2")|(datmelt$Question=="Q3"),"A",ifelse((datmelt$Question=="Q4")|(datmelt$Question=="Q5"),"B",ifelse((datmelt$Question=="Q6")|(datmelt$Question=="Q7"),"C",0))))
datmelt$color <- ifelse(datmelt$Missing == "TRUE", "Missing", "Observed")
#i
cols <- c("Missing" = "red", "Observed" = "skyblue3")
splitplot <- ggplot(datmelt, aes(Question, Day, fill=color)) + geom_raster() + scale_fill_manual(values = cols)  + theme(axis.text.x = element_text(angle=45, vjust=0.5),panel.background = element_rect(fill = NA)) + labs(x = "Questions Asked",y = "Day",fill="Block") + scale_y_reverse() + theme(legend.title=element_blank(),legend.position="none")
cols <- c('Q1','Q2','Q3','Q4','Q5','Q6','Q7','Q8')
fill <- matrix(1, 45, 8)
dat <- data.frame(fill)
colnames(dat) <- cols
dat$Day <- seq.int(nrow(dat))
set.seed(1234)
alternate.split.dat <- split.form(dat, bound = 3)[1:8]
#
library(ggplot2)
library(dplyr)
library(reshape2)
datmelt <- alternate.split.dat[1:8] %>% is.na %>% melt
colnames(datmelt) <- c("Day","Question","Missing")
#datmelt$block <- ifelse((datmelt$Question=="Q1")|(datmelt$Question=="Q8"),"X",ifelse((datmelt$Question=="Q2")|(datmelt$Question=="Q3"),"A",ifelse((datmelt$Question=="Q4")|(datmelt$Question=="Q5"),"B",ifelse((datmelt$Question=="Q6")|(datmelt$Question=="Q7"),"C",0))))
datmelt$color <- ifelse(datmelt$Missing == "TRUE", "Missing", "Observed")
cols <- c("Missing" = "red", "Observed" = "skyblue3")
alternatesplitplot <- ggplot(datmelt, aes(Question, Day, fill=color)) + geom_raster() + scale_fill_manual(values = cols)  + theme(axis.text.x = element_text(angle=45, vjust=0.5),panel.background = element_rect(fill = NA)) + labs(x = "Questions Asked",y = "Day",fill="Block") + scale_y_reverse() + theme(legend.title=element_blank(),legend.position="none")
set.seed(1234)
wave.dat <- wave.des(dat,11)
#wave.
library(ggplot2)
library(dplyr)
library(reshape2)
datmelt <- wave.dat[1:8] %>% is.na %>% melt
colnames(datmelt) <- c("Day","Question","Missing")
#datmelt$block <- ifelse((datmelt$Question=="Q1")|(datmelt$Question=="Q8"),"X",ifelse((datmelt$Question=="Q2")|(datmelt$Question=="Q3"),"A",ifelse((datmelt$Question=="Q4")|(datmelt$Question=="Q5"),"B",ifelse((datmelt$Question=="Q6")|(datmelt$Question=="Q7"),"C",0))))
datmelt$color <- ifelse(datmelt$Missing == "TRUE", "Missing", "Observed")
cols <- c("Missing" = "red", "Observed" = "skyblue3")
waveplot <-  ggplot(datmelt, aes(Question, Day, fill=color)) + geom_raster() + scale_fill_manual(values = cols)  + theme(axis.text.x = element_text(angle=45, vjust=0.5),panel.background = element_rect(fill = NA)) + labs(x = "Questions Asked",y = "Day",fill="Block") + scale_y_reverse() + theme(legend.title=element_blank(),legend.position="none")
grid.arrange(splitplot, alternatesplitplot, waveplot, ncol=3)
load("~/GitHub/designedmissingness/Results/tables20180509_60_1_high_hightime0.RData")
high_7 <- d
load("~/GitHub/designedmissingness/Results/tables20180509_60_1_med_hightime0.RData")
med_7 <- d
load("~/GitHub/designedmissingness/Results/tables20180509_60_1_low_hightime0.RData")
low_7 <- d
high_7
med_7
library(knitr)
kable(cbind("","","",rbind(low[[1]],med[[1]],high[[1]],low[[2]],med[[2]],high[[2]],low[[3]],med[[3]],high[[3]])),format="latex")
kable(cbind("","","",rbind(low_8[[1]],med_8[[1]],high_8[[1]],low_8[[2]],med_8[[2]],high_8[[2]],low_8[[3]],med_8[[3]],high_8[[3]])),format="latex")
load("~/GitHub/designedmissingness/Results/tables20180509_60_1_high_hightime0.RData")
high_8 <- d
load("~/GitHub/designedmissingness/Results/tables20180509_60_1_med_hightime0.RData")
med_8 <- d
load("~/GitHub/designedmissingness/Results/tables20180509_60_1_low_hightime0.RData")
low_8 <- d
library(knitr)
kable(cbind("","","",rbind(low_8[[1]],med_8[[1]],high_8[[1]],low_8[[2]],med_8[[2]],high_8[[2]],low_8[[3]],med_8[[3]],high_8[[3]])),format="latex")
df_8 <- data.frame(Design = rep(c("Split Form","Altered Split Form", "Wave Missingness"), each = 12))
df_8
df_8 <- data.frame(Design = rep(c("Split Form","Altered Split Form", "Wave Missingness"), each = 12), Missingness = rep(rep(c("Low","Medium", "High"), each = 4),3))
df_8
df_8 <- data.frame(Design = rep(c("Split Form","Altered Split Form", "Wave Missingness"), each = 12), Missingness = rep(rep(c("Low","Medium", "High"), each = 4),3), Parameter = rep(c("$\gamma_0$", "$\beta_1$", "$\beta_2$", "$\beta_3$"),9))
df_8 <- data.frame(Design = rep(c("Split Form","Altered Split Form", "Wave Missingness"), each = 12), Missingness = rep(rep(c("Low","Medium", "High"), each = 4),3), Parameter = rep(c("$\\gamma_0$", "$\\beta_1$", "$\\beta_2$", "$\\beta_3$"),9))
df_8
kable(df_8, escape=FALSE, format="latex")
c8 <- rbind(low_8[[1]],med_8[[1]],high_8[[1]],low_8[[2]],med_8[[2]],high_8[[2]],low_8[[3]],med_8[[3]],high_8[[3]])
c8
df_8 <- data.frame(Design = rep(c("Split Form","Altered Split Form", "Wave Missingness"), each = 12), Missingness = rep(rep(c("Low","Medium", "High"), each = 4),3), Parameter = rep(c("$\\gamma_0$", "$\\beta_1$", "$\\beta_2$", "$\\beta_3$"),9), Bias = c8["Bias"], "% Bias" = c8["% Bias"])
df_8 <- data.frame(Design = rep(c("Split Form","Altered Split Form", "Wave Missingness"), each = 12), Missingness = rep(rep(c("Low","Medium", "High"), each = 4),3), Parameter = rep(c("$\\gamma_0$", "$\\beta_1$", "$\\beta_2$", "$\\beta_3$"),9), Bias = c8["Bias"], "% Bias" = c8["Pct Bias"])
df_8
names(df_8)
names(df_8)[5] <- "% Bias"
names(df_8)
df_8
c8
df_8 <- data.frame(Design = rep(c("Split Form","Altered Split Form", "Wave Missingness"), each = 12), Missingness = rep(rep(c("Low","Medium", "High"), each = 4),3), Parameter = rep(c("$\\gamma_0$", "$\\beta_1$", "$\\beta_2$", "$\\beta_3$"),9), Bias = c8["Bias"], "% Bias" = c8["Pct Bias"], MSE = c8["MSE"], Coverage= c8["Coverage"], c8["CI Length"], FMI = c8["FMI"])
df_8
names(df_8)
names(df_8) <- c("Design", "Missingness", "Parameter", "Bias", "% Bias", "MSE", "Coverage", "CI Length", "FMI")
df_8
kable(df_8, escape=FALSE, format="latex")
df_8
df_8 <- data.frame(Design = rep(c("Split Form","Altered Split Form", "Wave Missingness"), each = 12), Missingness = rep(rep(c("Low","Medium", "High"), each = 4),3), Parameter = rep(c("$\\gamma_0$", "$\\beta_1$", "$\\beta_2$", "$\\beta_3$"),9), Bias = c8["Bias"], c8["Pct Bias"], MSE = c8["MSE"], Coverage= c8["Coverage"], c8["CI Length"], FMI = c8["FMI"])
names(df_8) <- c("Design", "Missingness", "Parameter", "Bias", "Pct Bias", "MSE", "Coverage", "CI Length", "FMI")
kable(df_8, escape = FALSE, format ="latex", digits = 3)
install.packages("kableExtra")
# Table 7
library(kableExtra)
library(dplyr)
df_8[,4:9] <- apply(df_8[,4:9], 2, round, digits = 3)
str(df_8)
df_8 <- data.frame(Design = rep(c("Split Form","Altered Split Form", "Wave Missingness"), each = 12), Missingness = rep(rep(c("Low","Medium", "High"), each = 4),3), Parameter = rep(c("$\\gamma_0$", "$\\beta_1$", "$\\beta_2$", "$\\beta_3$"),9), Bias = unlist(c8["Bias"]), unlist(c8["Pct Bias"]), MSE = unlist(c8["MSE"]), Coverage = c8["Coverage"], c8["CI Length"], FMI = c8["FMI"])
str(df_8)
df_8[,4:9] <- apply(df_8[,4:9], 2, round, digits = 3)
df_8
df_8
df_8 <- data.frame(Design = rep(c("Split Form","Altered Split Form", "Wave Missingness"), each = 12), Missingness = rep(rep(c("Low","Medium", "High"), each = 4),3), Parameter = rep(c("$\\gamma_0$", "$\\beta_1$", "$\\beta_2$", "$\\beta_3$"),9), Bias = unlist(c8["Bias"]), unlist(c8["Pct Bias"]), MSE = unlist(c8["MSE"]), Coverage = c8["Coverage"], c8["CI Length"], FMI = c8["FMI"])
df_8[,4:9] <- apply(df_8[,4:9], 2, round, digits = 3)
names(df_8) <- c("Design", "Level", "Parameter", "Bias", "Pct Bias", "MSE", "Coverage", "CI Length", "FMI")
row.names(df_8) <- NULL
df_8
